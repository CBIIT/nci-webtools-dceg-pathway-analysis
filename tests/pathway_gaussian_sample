
var should = require('chai').should();

var webdriver = require('selenium-webdriver'),
    By = webdriver.By,
    until = webdriver.until;

var driver = new webdriver.Builder()
    .forBrowser('chrome')
    .build();

driver.get("https://analysistools-sandbox.nci.nih.gov"+"/");
		driver.findElement(By.linkText("Pathway Analysis Tool")).click();
		driver.findElement(By.id("ui-id-3")).click();
		driver.findElement(By.id("gaussian")).click();
		driver.findElement(By.id("study_1")).sendKeys('C:\\Users\\jiangk3\\Desktop\\NCI\\PATHWAY\\Pathway Inputs\\study2.txt').then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("loadAndCheckButton_1")).click();
    driver.wait(until.elementLocated(By.id("sample_size_1_1")),10000);
		driver.findElement(By.id("sample_size_1_1")).sendKeys('21');
		driver.findElement(By.id("sample_size_1_2")).sendKeys('221');
		driver.findElement(By.id("deleteStudy_1")).click();
		driver.findElement(By.xpath("(//button[@type='button'])[6]")).click();
		driver.findElement(By.xpath("//div[@id='study-tab']/form/fieldset/button")).click();
		driver.findElement(By.id("study_2")).sendKeys('C:\\Users\\jiangk3\\Desktop\\NCI\\PATHWAY\\Pathway Inputs\\study2.txt').then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("loadAndCheckButton_2")).click();
    driver.wait(until.elementLocated(By.id("sample_size_2_1")),10000);
		driver.findElement(By.id("sample_size_2_1")).sendKeys('32');
		driver.findElement(By.id("sample_size_2_2")).sendKeys('332');
		driver.findElement(By.xpath("//div[@id='study-tab']/form/fieldset/button")).click();
		driver.findElement(By.id("study_3")).sendKeys('C:\\Users\\jiangk3\\Desktop\\NCI\\PATHWAY\\Pathway Inputs\\study2.txt').then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("loadAndCheckButton_3")).click();
    driver.wait(until.elementLocated(By.id("sample_size_3_1")),10000);
		driver.findElement(By.id("sample_size_3_1")).sendKeys('32');
		driver.findElement(By.id("sample_size_3_2")).sendKeys('3232');
		driver.findElement(By.xpath("//div[@id='study-tab']/form/fieldset/button")).click();
		driver.findElement(By.id("study_4")).sendKeys('C:\\Users\\jiangk3\\Desktop\\NCI\\PATHWAY\\Pathway Inputs\\study2.txt').then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("loadAndCheckButton_4")).click();
    driver.wait(until.elementLocated(By.id("sample_size_4_1")),10000);
		driver.findElement(By.id("sample_size_4_1")).sendKeys('32');
		driver.findElement(By.id("sample_size_4_2")).sendKeys('32');
		driver.findElement(By.xpath("//div[@id='study-tab']/form/fieldset/button")).click();
		driver.findElement(By.id("study_5")).sendKeys('C:\\Users\\jiangk3\\Desktop\\NCI\\PATHWAY\\Pathway Inputs\\study2.txt').then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("loadAndCheckButton_5")).click();
    driver.wait(until.elementLocated(By.id("sample_size_5_1")),10000);
		driver.findElement(By.id("sample_size_5_1")).sendKeys('32');
		driver.findElement(By.id("sample_size_5_2")).sendKeys('3');
		driver.findElement(By.id("ui-id-10")).click().then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("deleteStudy_2")).click();
		driver.findElement(By.xpath("(//button[@type='button'])[4]")).click();
		driver.findElement(By.id("ui-id-14")).click().then(function() {
        driver.sleep(1000);
    });
		driver.findElement(By.id("deleteStudy_4")).click();
		driver.findElement(By.xpath("(//button[@type='button'])[4]")).click();
		driver.findElement(By.id("file_pathway")).sendKeys('C:\\Users\\jiangk3\\Desktop\\NCI\\PATHWAY\\Pathway Inputs\\pathway.txt');
		driver.findElement(By.id("super_population")).sendKeys('(AFR) African');
		driver.findElement(By.css("button.ms-choice")).click();
		driver.findElement(By.name("selectItempopulation")).click();
		driver.findElement(By.xpath("//div[@id='study-tab']/form/fieldset[4]")).click();
		driver.findElement(By.id("email")).sendKeys('kevin.jiang2@nih.gov');
		driver.findElement(By.id("calculate")).click().then(function() {
        driver.sleep(6000);
    });
		driver.findElement(By.id("message")).getText().then(text=>text.should.equal('The request has been received. An email will be sent when the calculation has completed.'));
